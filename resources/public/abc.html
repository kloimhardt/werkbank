<html>
    <head>
        <style>
         .klmtext {
             cursor: default;
             fill: #fff;
             font-family: sans-serif;
             font-size: 6pt;
             font-style: italic;
            }
        </style>
        <body>
            <script src="/blockly/blockly_compressed.js"></script>
            <script src="/blockly/blocks_compressed.js"></script>
            <script src="/blockly/msg/js/en.js"></script>
            <script>

             Blockly.Blocks["funs-v-3"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-v-3",
                      "message0": "%1 %2 %3",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["fn", "fn"],
                               ["+", "+"],
                               ["-", "-"],
                               ["*", "*"],
                               ["/", "/"],
                               ["up", "up"],
                               ["lg/L-harmonic","lg/L-harmonic"],
                               ["lg/L-cental-polar","lg/L-central-polar"],
                               ["mn/multidimensional-minimize","mn/multidimensional-minimize"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"}],
                      "inputsInline": false,
                      "output": null,
                      "colour": 140,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}

             Blockly.Blocks["funs-v-4"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-v-4",
                      "message0": "%1 %2 %3 %4",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["+","+"],
                               ["up", "up"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"},
                          {"type": "input_value",
                           "name": "args-4"}],
                      "inputsInline": false,
                      "output": null,
                      "colour": 230,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}
             Blockly.Blocks["funs-v-4-defn"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-v-4-defn",
                      "message0": "%1 %2 %3 %4",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["defn", "defn"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"},
                          {"type": "input_value",
                           "name": "args-4"}],
                      "inputsInline": false,
                      "colour": 230,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}

             Blockly.Blocks["funs-v-3-def"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-v-3-def",
                         "message0": "%1 %2 %3",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "onedef",
                                 "options": [
                                     [
                                         "def",
                                         "def"
                                     ]
                                 ]
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             }
                         ],
                         "inputsInline": false,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}

             Blockly.Blocks["funs-v-3-fn"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-v-3-def",
                         "message0": "%1 %2 %3",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "onefn",
                                 "options": [
                                     [
                                         "fn",
                                         "fn"
                                     ]
                                 ]
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             }
                         ],
                         "inputsInline": false,
                         "output": null,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["idfuns-v-3"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "idfuns-v-3",
                         "message0": "%1 \" %2 \" %3",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "vegatex",
                                 "options": [
                                     [
                                         "print-text",
                                         "print-text"
                                     ],
                                     [
                                         "vega-lite",
                                         "vega-lite"
                                     ],
                                     [
                                         "tex",
                                         "tex"
                                     ],
                                     ["div", "div"],
                                     [
                                         "tex-matrix",
                                         "tex-matrix"
                                     ],
                                     [
                                         "mute-print",
                                         "mute-print"
                                     ],
                                     [
                                         "mute-vega",
                                         "mute-vega"
                                     ],
                                     [
                                         "mute-tex",
                                         "mute-tex"
                                     ],
                                 ]
                             },
                             {
                                 "type": "field_input",
                                 "name": "id",
                                 "text": "id"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             }
                         ],
                         "inputsInline": true,
                         "colour": 270,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["idfuns-v-4"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "idfuns-v-4",
                         "message0": "%1 \" %2 \" %3 %4",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "vegatex",
                                 "options": [
                                     [
                                         "vega",
                                         "vega"
                                     ],
                                     [
                                         "mute-vega",
                                         "mute-vega"
                                     ]
                                 ]
                             },
                             {
                                 "type": "field_input",
                                 "name": "id",
                                 "text": "id"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-4"
                             }
                         ],
                         "inputsInline": false,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["funs-h-2"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-h-2",
                      "message0": "%1 %2",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["-","-"],
                               ["sin","sin"],
                               ["cos", "cos"],
                               ["atan", "atan"],
                               ["square", "square"],
                               ["sqrt", "sqrt"],
                               ["up", "up"],
                               ["D", "D"],
                               ["partial", "partial"],
                               ["lg/L-free-particle", "lg/L-free-particle"],
                               ["Lagrange-equations","Lagrange-equations"],
                               ["Lagrangian->energy","Lagrangian->energy"],
                               ["literal-function","literal-function"],
                               ["F->C","F->C"],
                               ["simplify","simplify"],
                               ["Gamma","Gamma"],
                               ["velocity","velocity"],
                               ["points-xy->plot","points-xy->plot"],
                               ["points-xz->plot","points-xz->plot"],
                               ["points-tz->plot","points-tz->plot"]]},
                          {"type": "input_value",
                           "name": "args-2"}],
                      "inputsInline": true,
                      "output": null,
                      "colour": 270,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}

             Blockly.Blocks['sym_funs-h-2']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "sym_funs-h-2",
                         "message0": "%1",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "symbs",
                                 "options": [
                                     ["!","!"],
                                     ["sin", "sin"],
                                     ["cos", "cos"],
                                     ["square", "square"],
                                     ["identity","identity"],
                                     ["Math/PI", "Math/PI"],
                                     ["lg/L-free-particle", "lg/L-free-particle"],
                                     ["p->r","p->r"],
                                     ["s->r","s->r"],
                                     ["points-xy->plot","points-xy->plot"],
                                     ["points-xz->plot","points-xz->plot"],
                                     ["points-tz->plot","points-tz->plot"]
                                     ]
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": "#A65C81",
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}

             Blockly.Blocks["funs-h-3"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-h-3",
                      "message0": "%1 %2 %3",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["fn", "fn"],
                               ["+", "+"],
                               ["-", "-"],
                               ["*", "*"],
                               ["/", "/"],
                               ["compose","compose"],
                               ["nth", "nth"],
                               ["up", "up"],
                               ["lg/L-harmonic","lg/L-harmonic"],
                               ["lg/L-uniform-acceleration","lg/L-uniform-acceleration"],
                               ["lg/L-central-rectangular","lg/L-central-rectangular"],
                               ["lg/L-central-polar","lg/L-central-polar"],
                               ["cross-product","cross-product"],
                               ["mn/multidimensional-minimize","mn/multidimensional-minimize"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"}],
                      "inputsInline": true,
                      "output": null,
                      "colour": 140,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}

             Blockly.Blocks["funs-h-4"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-h-4",
                      "message0": "%1 %2 %3 %4",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["*","*"],
                               ["up","up"],
                               ["->local","->local"],
                               ["minimize","minimize"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"},
                          {"type": "input_value",
                           "name": "args-4"}],
                      "inputsInline": true,
                      "output": null,
                      "colour": 230,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}

             Blockly.Blocks["funs-h-5"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-h-5",
                      "message0": "%1 %2 %3 %4 %5",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["*","*"],
                               ["Lagrangian-action", "Lagrangian-action"],
                               ["make-path-txyz","make-path-txyz"],
                               ["make-path-tz","make-path-tz"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"},
                          {"type": "input_value",
                           "name": "args-4"},
                          {"type": "input_value",
                           "name": "args-5"}],
                      "inputsInline": true,
                      "output": null,
                      "colour": 360,
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}
             Blockly.Blocks["funs-h-6"]= {
                 init: function() {this.jsonInit(
                     {"type": "funs-h-6",
                      "message0": "%1 %2 %3 %4 %5 %6",
                      "args0": [
                          {"type": "field_dropdown",
                           "name": "funsnamen",
                           "options": [
                               ["!","!"],
                               ["*","*"],
                               ["lg/make-path", "lg/make-path"]]},
                          {"type": "input_value",
                           "name": "args-2"},
                          {"type": "input_value",
                           "name": "args-3"},
                          {"type": "input_value",
                           "name": "args-4"},
                          {"type": "input_value",
                           "name": "args-5"},
                          {"type": "input_value",
                           "name": "args-6"}],
                      "inputsInline": true,
                      "output": null,
                      "colour": "#A65C81",
                      "tooltip": "",
                      "helpUrl": ""}
                 )}}
             Blockly.Blocks["funs-h-2-cus"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-h-2-cus",
                         "message0": "%1 %2",
                         "args0": [
                             {
                                 "type": "field_variable",
                                 "name": "kopf",
                                 "variable": "?"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 270,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["funs-h-3-cus"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-h-3-cus",
                         "message0": "%1 %2 %3",
                         "args0": [
                             {
                                 "type": "field_variable",
                                 "name": "kopf",
                                 "variable": "?"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["funs-h-4-cus"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-h-4-cus",
                         "message0": "%1 %2 %3 %4",
                         "args0": [
                             {
                                 "type": "field_variable",
                                 "name": "kopf",
                                 "variable": "?"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-4"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 230,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["funs-h-5-cus"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-h-5-cus",
                         "message0": "%1 %2 %3 %4 %5",
                         "args0": [
                             {
                                 "type": "field_variable",
                                 "name": "kopf",
                                 "variable": "?"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-4"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-5"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 230,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["funs-h-6-cus"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-h-6-cus",
                         "message0": "%1 %2 %3 %4 %5 %6",
                         "args0": [
                             {
                                 "type": "field_variable",
                                 "name": "kopf",
                                 "variable": "?"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-4"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-5"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-6"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": "#A65C81",
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["funs-h-7-cus"]= {
                 init: function() {this.jsonInit(
                     {
                         "type": "funs-h-7-cus",
                         "message0": "%1 %2 %3 %4 %5 %6 %7",
                         "args0": [
                             {
                                 "type": "field_variable",
                                 "name": "kopf",
                                 "variable": "?"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-4"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-5"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-6"
                             },
                             {
                                 "type": "input_value",
                                 "name": "args-7"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks["list-h-2"]= {
                     init: function() {this.jsonInit(
                         {
                             "type": "list-h-2",
                             "message0": "%1 %2",
                             "args0": [
                                 {
                                     "type": "input_value",
                                     "name": "args-1",
                                 },
                                 {
                                     "type": "input_value",
                                     "name": "args-2"
                                 }
                             ],
                             "inputsInline": true,
                             "output": null,
                             "colour": 270,
                             "tooltip": "",
                             "helpUrl": ""
                         }
                     )}}
             Blockly.Blocks['let']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "let",
                         "message0": "%1 %2 %3",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "funsnamen",
                                 "options": [
                                     [
                                         "let",
                                         "let"
                                     ]
                                 ]
                             },
                             {
                                 "type": "input_statement",
                                 "name": "arg-1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg-2"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}

             Blockly.Blocks['pair']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "pair",
                         "message0": "%1 %2",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg-1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg-2"
                             }
                         ],
                         "inputsInline": true,
                         "previousStatement": null,
                         "nextStatement": null,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}

             Blockly.Blocks['map']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "map",
                         "message0": "%1 %2",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "onlymap",
                                 "options": [
                                     [
                                         "{ }",
                                         "{ }"
                                     ]
                                 ]
                             },
                             {
                                 "type": "input_statement",
                                 "name": "map_data"
                             }
                         ],
                         "output": null,
                         "colour": 215, //140
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}

             Blockly.Blocks['vector']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "vector",
                         "message0": "%1 %2",
                         "args0": [
                             {
                                 "type": "field_dropdown",
                                 "name": "onlyvector",
                                 "options": [
                                     [
                                         "[ ]",
                                         "[ ]"
                                     ]
                                 ]
                             },
                             {
                                 "type": "input_statement",
                                 "name": "vec_data"
                             }
                         ],
                         "output": null,
                         "colour": 195, //140
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks['args-1']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "args-1",
                         "message0": "%1",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg_1"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 270,
                         "tooltip": "",
                         "helpUrl": ""}
                 )}}
             Blockly.Blocks['args-2']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "args-2",
                         "message0": "%1 %2",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg_1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_2"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 140,
                         "tooltip": "",
                         "helpUrl": ""}
                 )}}
             Blockly.Blocks['args-3']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "args-3",
                         "message0": "%1 %2 %3",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg_1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_3"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 230,
                         "tooltip": "",
                         "helpUrl": ""}
                 )}}
             Blockly.Blocks['args-4']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "args-4",
                         "message0": "%1 %2 %3 %4",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg_1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_4"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": 360,
                         "tooltip": "",
                         "helpUrl": ""}
                 )}}
             Blockly.Blocks['args-5']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "args-5",
                         "message0": "%1 %2 %3 %4 %5",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg_1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_4"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_5"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": "#A65C81",
                         "tooltip": "",
                         "helpUrl": ""}
                 )}}
             Blockly.Blocks['args-6']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "args-6",
                         "message0": "%1 %2 %3 %4 %5 %6",
                         "args0": [
                             {
                                 "type": "input_value",
                                 "name": "arg_1"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_2"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_3"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_4"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_5"
                             },
                             {
                                 "type": "input_value",
                                 "name": "arg_6"
                             }
                         ],
                         "inputsInline": true,
                         "output": null,
                         "colour": "140",
                         "tooltip": "",
                         "helpUrl": ""}
                 )}}
             Blockly.Blocks['num']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "num",
                         "message0": "%1",
                         "args0": [
                             {
                                 "type": "field_input",
                                 "name": "nummer",
                                 "text": "0.0"
                             }
                         ],
                         "output": null,
                         "colour": "#A65C81",
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks['num_sym']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "num_sym",
                         "message0": "%1",
                         "args0": [
                             {
                                 "type": "field_input",
                                 "name": "nummer",
                                 "text": "\'m"
                             }
                         ],
                         "output": null,
                         "colour": "#A65C81",
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
             Blockly.Blocks['text']= {
                 init: function() {this.jsonInit(
                     {
                         "type": "text",
                         "message0": "\" %1 \"",
                         "args0": [
                             {
                                 "type": "field_input",
                                 "name": "dertext",
                                 "text": ""
                             }
                         ],
                         "output": null,
                         "colour": "#A65C81",
                         "tooltip": "",
                         "helpUrl": ""
                     }
                 )}}
            </script>
            <div id="blocklyDiv" style="height: 96%"></div>
            <!--  <div id="blocklyDiv" style="height: 520px; width: 1400px;"></div> -->
            <xml id="toolbox" style="display: none">
                <category name="Inline<">
                    <block type="sym_funs-h-2"></block>
                    <block type="funs-h-2"></block>
                    <block type="funs-h-2-cus"></block>
                    <block type="list-h-2"></block>
                    <block type="funs-h-3"></block>
                    <block type="funs-h-3-cus"></block>
                </category>
                <category name="Inline>">
                    <block type="funs-h-4"></block>
                    <block type="funs-h-4-cus"></block>
                    <block type="funs-h-5"></block>
                    <block type="funs-h-5-cus"></block>
                    <block type="funs-h-6"></block>
                    <block type="funs-h-6-cus"></block>
                    <block type="funs-h-7-cus"></block>
                </category>
                <category name="Vertical">
                    <block type="funs-v-3"></block>
                    <block type="funs-v-4"></block>
                </category>
                <category name="Special">
                    <block type="num"></block>
                    <block type="num_sym"></block>
                    <block type="text"></block>
                    <block type="idfuns-v-3"></block>
                    <block type="idfuns-v-4"></block>
                    <block type="vector"></block>
                    <block type="pair"></block>
                    <block type="funs-v-3-def"></block>
                    <block type="let"></block>
                    <block type="map"></block>
                </category>
                <category name="Defn">
                    <block type="funs-v-4-defn"></block>
                    <block type="funs-v-3-fn"></block>
                    <block type="args-1"></block>
                    <block type="args-2"></block>
                    <block type="args-3"></block>
                    <block type="args-4"></block>
                    <block type="args-5"></block>
                    <block type="args-6"></block>
                </category>
                <category name="Variables" colour="#A65C81" custom="VARIABLE"></category>
            </xml>
            <script>
             var workspace = Blockly.inject('blocklyDiv',
                                            {toolbox: document.getElementById('toolbox'),
                                            media: "/blockly/media/"});
            </script>
            <script>
             function download(filename, text) {
                 var element = document.createElement('a');
                 element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
                 element.setAttribute('download', filename);

                 element.style.display = 'none';
                 document.body.appendChild(element);

                 element.click();

                 document.body.removeChild(element);
             }

            </script>
            <script>
             function shadeBlocks(){
                 Blockly.mainWorkspace.getAllBlocks().forEach(function(b) {
                     //b.setMovable(false);
                     //b.setEditable(true);
                     b.setShadow(true);

                     b.inputList.forEach(il => {
                         il.fieldRow.forEach(fr => {
                             fr.textElement_.classList.replace("blocklyText","klmtext")})})
                 });
             }
             function unshadeBlocks(){
                 Blockly.mainWorkspace.getAllBlocks().forEach(function(b) {
                     //b.setMovable(false);
                     //b.setEditable(true);

                     b.inputList.forEach(il => {
                         il.fieldRow.forEach(fr => {
                             fr.textElement_.classList.replace("klmtext","blocklyText")})})

                     b.setShadow(false);
                 });
             }

             function loadFileAsText(){
                 //document.getElementById("fileToLoad").disabled=true;
                 var fileToLoad = document.getElementById("fileToLoad").files[0];
                 var fileReader = new FileReader();
                 fileReader.onload = function(fileLoadedEvent){
                     var textFromFileLoaded = fileLoadedEvent.target.result;
                     Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(textFromFileLoaded), Blockly.mainWorkspace);
                     Blockly.mainWorkspace.scrollbar.set(450,Blockly.mainWorkspace.getMetrics().contentHeight-500);
                 }
                 fileReader.readAsText(fileToLoad, "UTF-8");

             }
             function hasShaded(){
                 s=false;
                 Blockly.mainWorkspace.getAllBlocks().forEach(function(b) {
                     if (b.isShadow())
                     {
                         s=true;
                     }
                 })
                 return(s);
             }
             function saveXML(){
                 if(hasShaded()) {
                     alert("Shadow Blocks cannot be saved. Press Unshade Blocks Button.");
                 } else {
                     download('workspace.xml', Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(Blockly.mainWorkspace)));
                 }
             }
            </script>
            <script>
             function sendXMLToServer(){
                 var xmlhttp = new XMLHttpRequest();
                 xmlhttp.open("POST","thexml");
                 var xmlDoc;
                 xmlhttp.onreadystatechange = function() {
                     if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                         xmlDoc = xmlhttp.responseXML;
                         console.log(xmlDoc)
                     }
                 };
                 xmlhttp.setRequestHeader('Content-Type', 'text/xml');
                 var xml = Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(Blockly.mainWorkspace));
                 xmlhttp.send(xml);
             }
            </script>
            <!--  <button onclick="Blockly.mainWorkspace.scrollbar.set(450,Blockly.mainWorkspace.getMetrics().contentHeight-500);">scroll</button> -->
            <div>
            <button onclick="shadeBlocks();">Shade Blocks</button>
            <button onclick="unshadeBlocks();">Unshade Blocks</button>
            <button onClick="saveXML();">Save XML</button>
            <input type="file" id="fileToLoad">
            <script>
             document.getElementById("fileToLoad").addEventListener("change", loadFileAsText);
                         </script>

                         <button onClick="sendXMLToServer()">Run</button>
 <!--                          <text class="blocklyText">blocklyText</text>
                         <text class="klmtext">klmText</text>
      <text>normal</text> -->
            </div>
        </body>
    </head>
</html>
